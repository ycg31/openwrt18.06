
<%
math.randomseed(os.time())
-%>
<html>

<head>
    <link rel="stylesheet" href="/luci-static/vssr/css/vssr.css??v=<%=math.random(1,100000)%>">
    <script src="<%=media%>/js/jquery.min.js"></script>
</head>

<body> 
<div class="pure-g status">
    <div class="pure-u-1-6">
        <div class="block pure-g">
            <div class="pure-u-3-5">
                <h4 id="shadowsocksr_status"><%:Client%><br /><span class="red"><%:Not Running%></span></h4>
            </div>
            <div class="pure-u-2-5">
                <div class="img-con">
                     <img src="https://i.imgur.com/wzbtvXp.png" >
                </div>
            </div>
        </div>
    </div>

<div class="pure-u-1-6">
        <div class="block pure-g">
            <div class="pure-u-3-5">
                 <h4 id="baidu_status"><%:baidu%><br /><span class="red"><%:Problem detected%>✘</span></h4>
            </div>
            <div class="pure-u-2-5">
                <div class="img-con">
                      <img src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAyMy4wLjEsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjxzdmcgdmVyc2lvbj0iMS4xIiBpZD0i5Zu+5bGCXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4Ig0KCSB2aWV3Qm94PSIwIDAgMTAwIDEwMCIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgMTAwIDEwMDsiIHhtbDpzcGFjZT0icHJlc2VydmUiPg0KPHN0eWxlIHR5cGU9InRleHQvY3NzIj4NCgkuc3Qwe2ZpbGw6IzMzODhGRjt9DQoJLnN0MXtmaWxsLXJ1bGU6ZXZlbm9kZDtjbGlwLXJ1bGU6ZXZlbm9kZDtmaWxsOiNGRkZGRkY7fQ0KPC9zdHlsZT4NCjxjaXJjbGUgY2xhc3M9InN0MCIgY3g9IjUwIiBjeT0iNTAiIHI9IjUwIi8+DQo8ZyBpZD0i5pCc57SiX+eGiuaOjF82Nmljb24iPg0KCTxnIGlkPSJsb2dvIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMjEuMjEyMTIxLCA5MC45MDkwOTEpIj4NCgkJPHBhdGggaWQ9IkZpbGwtMSIgY2xhc3M9InN0MSIgZD0iTS03OS43LTU1LjRjNC41LDAsOC41LTUuNCw4LjUtMTEuOWMwLTYuNS0zLjctMTEuOS04LjUtMTEuOWMtNC41LDAtOC41LDUuNC04LjUsMTEuOQ0KCQkJQy04Ny45LTYwLjctODQuMi01NS40LTc5LjctNTUuNCIvPg0KCQk8cGF0aCBpZD0iRmlsbC0zIiBjbGFzcz0ic3QxIiBkPSJNLTU5LjktNTQuNWM2LjIsMC44LDEwLjItNS43LDExLTEwLjhjMC44LTQuOC0zLjEtMTAuOC03LjYtMTEuNmMtNC4yLTEuMS05LjksNS45LTEwLjIsMTAuNQ0KCQkJQy02Ny4yLTYxLTY2LjEtNTUuNC01OS45LTU0LjUiLz4NCgkJPHBhdGggaWQ9IkZpbGwtNSIgY2xhc3M9InN0MSIgZD0iTS05NS4zLTM4LjZjOC41LTEuNyw3LjEtMTEuNiw3LjEtMTMuOWMtMC4zLTMuNC00LjItOS4zLTkuOS04LjhjLTYuOCwwLjYtNy42LDEwLjItNy42LDEwLjINCgkJCUMtMTA2LjktNDYuNi0xMDMuOC0zNi45LTk1LjMtMzguNiIvPg0KCQk8cGF0aCBpZD0iRmlsbC03IiBjbGFzcz0ic3QxIiBkPSJNLTM1LjItNDYuM2MwLTIuNS0yLTkuNi05LjMtOS42Yy03LjQsMC04LjUsNi44LTguNSwxMS42YzAsNC41LDAuMywxMSw5LjYsMTAuOA0KCQkJQy0zNC40LTMzLjgtMzUuMi00NC0zNS4yLTQ2LjMiLz4NCgkJPHBhdGggaWQ9IkZpbGwtOSIgY2xhc3M9InN0MSIgZD0iTS04Ni41LTIxLjRjLTAuMywwLjYtMC44LDIuNS0wLjMsNGMwLjgsMy40LDQsMy43LDQsMy43aDQuMnYtMTAuOGgtNC44DQoJCQlDLTg1LjEtMjMuNi04Ni4yLTIxLjktODYuNS0yMS40Ii8+DQoJCTxwYXRoIGlkPSJGaWxsLTExIiBjbGFzcz0ic3QxIiBkPSJNLTUzLjEtOS41aC0xMi43Yy00LjgtMS4xLTUuMS00LjgtNS4xLTQuOHYtMTMuOWg1LjF2MTIuNWMwLjMsMS40LDIsMS43LDIsMS43aDUuNHYtMTMuOWg1LjQNCgkJCVYtOS41eiBNLTczLjItOS4ySC04NGMtNC44LTAuOC02LjgtNC4yLTYuOC00LjhjLTAuMy0wLjYtMS43LTMuMS0wLjgtNy42YzItNi41LDcuOS03LjEsNy45LTcuMWg1Ljd2LTcuMWg0LjgNCgkJCUMtNzMuMi0zNS44LTczLjItOS4yLTczLjItOS4yeiBNLTQ0LjYtMjUuM2MwLDAtOS42LTcuNC0xNS4zLTE1LjNjLTcuNi0xMS42LTE4LjQtNy4xLTIxLjgtMS4xYy0zLjQsNS45LTkuMSw5LjktOS45LDEwLjgNCgkJCWMtMC44LDAuOC0xMS42LDYuOC05LjEsMTcuM0MtOTguMS0zLjItODkuOS0zLjUtODkuOS0zLjVzNi4yLDAuNiwxMy4zLTEuMWM3LjEtMS43LDEzLjMsMC4zLDEzLjMsMC4zUy00Ni42LDEuMy00Mi05LjcNCgkJCUMtMzcuNS0xOS43LTQ0LjYtMjUuMy00NC42LTI1LjNMLTQ0LjYtMjUuM3oiLz4NCgk8L2c+DQo8L2c+DQo8L3N2Zz4NCg==">
                </div>
            </div>
        </div>
    </div>


<div class="pure-u-1-6">
        <div class="block pure-g">
            <div class="pure-u-3-5">
               <h4 id="google_status"><%:youtube%><br /><span class="red"><%:Problem detected%>✘</span></h4>
            </div>
            <div class="pure-u-2-5">
                <div class="img-con">
                   <img src="https://i.imgur.com/3mE04AZ.png">
                </div>
            </div>
        </div>
    </div>

    <div class="pure-u-1-6">
        <div class="block pure-g">
            <div class="pure-u-3-5">
                <h4 id="game_status"><%:Game Mode%><br /><span class="red"><%:Not Running%></span></h4>
            </div>
            <div class="pure-u-2-5">
                <div class="img-con">
                    <img src="/luci-static/vssr/img/udp.svg">
                </div>
            </div>
        </div>
    </div>
    <div class="pure-u-1-6">
        <div class="block pure-g">
            <div class="pure-u-3-5">
                <h4 id="chinadns_status">𝐂𝐡𝐢𝐧𝐚𝐃𝐍𝐒<br /><span class="red"><%:Not Running%>✘</span></h4>
            </div>
            <div class="pure-u-2-5">
                <div class="img-con">
                     <img src="https://i.imgur.com/3hkGjsK.png" >
                </div>
            </div>
        </div>
    </div>
    <div class="pure-u-1-6">
        <div class="block pure-g">
            <div class="pure-u-3-5">
                <h4 id="socks5_status">𝙎𝙊𝘾𝙆𝙎5<br /><span class="red"><%:Not Running%>✘</span></h4>
            </div>
            <div class="pure-u-2-5">
                <div class="img-con">
                     <img src="https://i.imgur.com/bYz9YoR.png" >
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    const VSSR_ASSETS = '/luci-static/vssr/';
        function get_state(){
            $.get('<%=url([[admin]], [[vpn]], [[shadowsocksr]], [[run]])%>',
            function (data) {
                console.log(data);
            }, "json");
        }
        //get_state();
        //<![CDATA[
        XHR.poll(5, '<%=url([[admin]], [[vpn]], [[shadowsocksr]], [[run]])%>', null,
            function (x, data) {
                var tb = document.getElementById('shadowsocksr_status');
                var tb1 = document.getElementById('google_status');
                var tb2 = document.getElementById('baidu_status');
                var tb3 = document.getElementById('game_status');
                var tb4 = document.getElementById('chinadns_status');
                var tb5 = document.getElementById('socks5_status');
                if (data && tb) {
                    if (data.global) {
                        tb.innerHTML = '<%:Client%><br><span class="green"><%:Running%>✔</span>';
                    } else {
                        tb.innerHTML = '<%:Client%><br><span class="red"><%:Not Running%>✘</span>';
                                 }
                    if (data.google) {
                        tb1.innerHTML = '<%:youtube%><br><span class="green"><%:Connect OK%>✔</span>';
                    } else {
                        tb1.innerHTML = '<%:youtube%><br><span class="red"><%:Problem detected%>✘</span>';
                    }
                    if (data.baidu) {
                        tb2.innerHTML = '<%:baidu%><br><span class="green"><%:Connect OK%>✔</span>';
                    } else {
                        tb2.innerHTML = '<%:baidu%><br><span class="red"><%:Problem detected%>✘</span>';
                    }
                    if (data.game) {
                        tb3.innerHTML = '<%:Game Mode%><br><span class="green"><%:Running%>✔</span>';
                    } else {
                        tb3.innerHTML = '<%:Game Mode%><br><span class="red"><%:Not Running%>✘</span>';
                    }
                    if (data.chinadns) {
                        tb4.innerHTML = '𝐂𝐡𝐢𝐧𝐚𝐃𝐍𝐒<br><span class="green"><%:Running%>✔</span>';
                    } else {
                        tb4.innerHTML = '𝐂𝐡𝐢𝐧𝐚𝐃𝐍𝐒<br><span class="red"><%:Not Running%>✘</span>';
                    }
                    if (data.socks5) {
                        tb5.innerHTML = '𝙎𝙊𝘾𝙆𝙎5<br><span class="green"><%:Running%>✔</span>';
                    } else {
                        tb5.innerHTML = '𝙎𝙊𝘾𝙆𝙎5<br><span class="red"><%:Not Running%>✘</span>';
                    }
                }
            }
        );
        
//]]>
    </script>
</body>

</html></fieldset>  
